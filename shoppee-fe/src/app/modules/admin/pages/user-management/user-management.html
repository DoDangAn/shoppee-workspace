<div class="page-container">
	<div class="page-header">
		<h1 class="page-title">Quản lý người dùng</h1>
		<button mat-raised-button color="primary" (click)="openAddDialog()">
			<mat-icon>add</mat-icon>
			Add New User
		</button>
	</div>

	<mat-card>
		<mat-card-content>
			<div *ngIf="error" class="error">{{error}}</div>
			<mat-form-field appearance="outline" style="width:100%; margin-bottom:12px;">
				<mat-label>Tìm kiếm người dùng</mat-label>
				<input matInput (keyup)="applyFilter($event)" placeholder="Nhập tên hoặc email..." #input>
			</mat-form-field>

			<div class="table-container">
				<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
					<ng-container matColumnDef="fullname">
						<th mat-header-cell *matHeaderCellDef mat-sort-header>Họ tên</th>
						<td mat-cell *matCellDef="let user">{{user.fullname}}</td>
					</ng-container>

					<ng-container matColumnDef="email">
						<th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
						<td mat-cell *matCellDef="let user">{{user.email}}</td>
					</ng-container>

					<ng-container matColumnDef="roles">
						<th mat-header-cell *matHeaderCellDef>Quyền</th>
						<td mat-cell *matCellDef="let user">{{user.roles}}</td>
					</ng-container>

					<ng-container matColumnDef="actions">
						<th mat-header-cell *matHeaderCellDef>Actions</th>
						<td mat-cell *matCellDef="let user">
							<button mat-icon-button color="primary" (click)="openEditDialog(user)">
								<mat-icon>edit</mat-icon>
							</button>
							<button mat-icon-button color="warn" (click)="deleteUser(user)">
								<mat-icon>delete</mat-icon>
							</button>
						</td>
					</ng-container>

					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

					<tr class="mat-row" *matNoDataRow>
						<td class="mat-cell" colspan="4">No users available</td>
					</tr>
				</table>

				<mat-paginator [pageSizeOptions]="[5,10,25,100]"></mat-paginator>
			</div>
		</mat-card-content>
	</mat-card>
</div>
